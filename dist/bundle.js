/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/factories/base-figure.factory.ts":
/*!**********************************************!*\
  !*** ./src/factories/base-figure.factory.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.BaseFigureFactory = exports.onCreateElement = void 0;\nconst properties_1 = __webpack_require__(/*! ../models/properties */ \"./src/models/properties.ts\");\nlet elementsCreated = 0;\nconst figureCounters = {};\nconst onCreateElement = () => {\n    return elementsCreated++;\n};\nexports.onCreateElement = onCreateElement;\nclass BaseFigureFactory {\n    static getBaseProperties(figureType) {\n        const getFigureNumber = (figureType) => {\n            if (!figureCounters[figureType]) {\n                figureCounters[figureType] = 1;\n            }\n            else {\n                figureCounters[figureType]++;\n            }\n            return figureCounters[figureType];\n        };\n        return [\n            new properties_1.NameProperty(\"name\", `${figureType}-${getFigureNumber(figureType)}`),\n            new properties_1.PercentageProperty(\"opacity\", 1),\n            new properties_1.NumberProperty(\"rotate\", 0),\n            new properties_1.EnumProperty(\"transform-origin\", \"center\", [\"center\", \"top\", \"bottom\", \"left\", \"right\"], \"rotate-point\"),\n            new properties_1.NumberProperty(\"z-index\", (0, exports.onCreateElement)(), \"z-index\"),\n            new properties_1.NumberProperty(\"scaleX\", 1, \"Scale X\"),\n            new properties_1.NumberProperty(\"scaleY\", 1, \"Scale Y\"),\n            new properties_1.NumberProperty(\"translateX\", 0, \"Translate X\", Number.MIN_SAFE_INTEGER, Number.MAX_VALUE),\n            new properties_1.NumberProperty(\"translateY\", 0, \"Translate Y\", Number.MIN_SAFE_INTEGER, Number.MAX_VALUE),\n            new properties_1.ColorProperty(\"fill\", \"black\"),\n            new properties_1.ColorProperty(\"stroke\", \"black\"),\n            new properties_1.StringProperty(\"stroke-dasharray\", \"0,0\", \"Stroke Type\"),\n        ].reduce((prev, curr) => (Object.assign(Object.assign({}, prev), { [curr.name]: curr })), {});\n    }\n}\nexports.BaseFigureFactory = BaseFigureFactory;\nBaseFigureFactory.svgNS = \"http://www.w3.org/2000/svg\";\n\n\n//# sourceURL=webpack://cg_fmi/./src/factories/base-figure.factory.ts?");

/***/ }),

/***/ "./src/factories/circle.factory.ts":
/*!*****************************************!*\
  !*** ./src/factories/circle.factory.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.CircleFactory = void 0;\nconst circle_1 = __webpack_require__(/*! ../models/circle */ \"./src/models/circle.ts\");\nconst properties_1 = __webpack_require__(/*! ../models/properties */ \"./src/models/properties.ts\");\nconst base_figure_factory_1 = __webpack_require__(/*! ./base-figure.factory */ \"./src/factories/base-figure.factory.ts\");\nclass CircleFactory {\n    createFigure() {\n        const element = document.createElementNS(base_figure_factory_1.BaseFigureFactory.svgNS, \"circle\");\n        const circle = new circle_1.Circle(element);\n        circle.properties = this.getProperties();\n        circle.refreshProperties();\n        return circle;\n    }\n    getProperties() {\n        const currentProps = [\n            new properties_1.NumberProperty(\"cx\", 50, \"x\"),\n            new properties_1.NumberProperty(\"cy\", 50, \"y\"),\n            new properties_1.NumberProperty(\"r\", 10, \"radius\"),\n        ].reduce((prev, curr) => (Object.assign(Object.assign({}, prev), { [curr.name]: curr })), {});\n        return Object.assign(Object.assign({}, base_figure_factory_1.BaseFigureFactory.getBaseProperties(\"circle\")), currentProps);\n    }\n}\nexports.CircleFactory = CircleFactory;\n\n\n//# sourceURL=webpack://cg_fmi/./src/factories/circle.factory.ts?");

/***/ }),

/***/ "./src/factories/ellipse.factory.ts":
/*!******************************************!*\
  !*** ./src/factories/ellipse.factory.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EllipseFactory = void 0;\nconst properties_1 = __webpack_require__(/*! ../models/properties */ \"./src/models/properties.ts\");\nconst ellipse_1 = __webpack_require__(/*! ../models/ellipse */ \"./src/models/ellipse.ts\");\nconst base_figure_factory_1 = __webpack_require__(/*! ./base-figure.factory */ \"./src/factories/base-figure.factory.ts\");\nclass EllipseFactory extends base_figure_factory_1.BaseFigureFactory {\n    createFigure() {\n        const element = document.createElementNS(base_figure_factory_1.BaseFigureFactory.svgNS, \"ellipse\");\n        const ellipse = new ellipse_1.Ellipse(element);\n        ellipse.properties = this.getProperties();\n        ellipse.refreshProperties();\n        return ellipse;\n    }\n    getProperties() {\n        const currentProps = [\n            new properties_1.NumberProperty(\"rx\", Math.floor(Math.random() * 50) + 20),\n            new properties_1.NumberProperty(\"ry\", Math.floor(Math.random() * 50) + 20),\n        ].reduce((prev, curr) => (Object.assign(Object.assign({}, prev), { [curr.name]: curr })), {});\n        return Object.assign(Object.assign({}, base_figure_factory_1.BaseFigureFactory.getBaseProperties(\"ellipse\")), currentProps);\n    }\n}\nexports.EllipseFactory = EllipseFactory;\n\n\n//# sourceURL=webpack://cg_fmi/./src/factories/ellipse.factory.ts?");

/***/ }),

/***/ "./src/factories/group.factory.ts":
/*!****************************************!*\
  !*** ./src/factories/group.factory.ts ***!
  \****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.GroupFactory = void 0;\nconst group_1 = __importDefault(__webpack_require__(/*! ../models/group */ \"./src/models/group.ts\"));\nconst properties_1 = __webpack_require__(/*! ../models/properties */ \"./src/models/properties.ts\");\nconst base_figure_factory_1 = __webpack_require__(/*! ./base-figure.factory */ \"./src/factories/base-figure.factory.ts\");\nclass GroupFactory extends base_figure_factory_1.BaseFigureFactory {\n    createFigure(groupName) {\n        const element = document.createElementNS(base_figure_factory_1.BaseFigureFactory.svgNS, \"g\");\n        const group = new group_1.default(element);\n        group.properties = this.getProperties(groupName);\n        group.refreshProperties();\n        return group;\n    }\n    getProperties(groupName) {\n        const currentProps = [\n            new properties_1.NameProperty(\"groupName\", groupName),\n        ].reduce((prev, curr) => (Object.assign(Object.assign({}, prev), { [curr.name]: curr })), {});\n        return Object.assign(Object.assign({}, currentProps), Object.fromEntries(Object.entries(base_figure_factory_1.BaseFigureFactory.getBaseProperties(\"line\")).filter(([key]) => key !== \"name\" && key !== 'fill' && key !== 'stroke')));\n    }\n}\nexports.GroupFactory = GroupFactory;\n\n\n//# sourceURL=webpack://cg_fmi/./src/factories/group.factory.ts?");

/***/ }),

/***/ "./src/factories/index.ts":
/*!********************************!*\
  !*** ./src/factories/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.figureFactories = void 0;\nconst circle_factory_1 = __webpack_require__(/*! ./circle.factory */ \"./src/factories/circle.factory.ts\");\nconst ellipse_factory_1 = __webpack_require__(/*! ./ellipse.factory */ \"./src/factories/ellipse.factory.ts\");\nconst line_factory_1 = __webpack_require__(/*! ./line.factory */ \"./src/factories/line.factory.ts\");\nconst polygon_factory_1 = __webpack_require__(/*! ./polygon.factory */ \"./src/factories/polygon.factory.ts\");\nconst rectangle_factory_1 = __webpack_require__(/*! ./rectangle.factory */ \"./src/factories/rectangle.factory.ts\");\nexports.figureFactories = [\n    new circle_factory_1.CircleFactory(),\n    new rectangle_factory_1.RectangleFactory(),\n    new line_factory_1.LineFactory(),\n    new polygon_factory_1.PolygonFactory(),\n    new ellipse_factory_1.EllipseFactory(),\n];\n\n\n//# sourceURL=webpack://cg_fmi/./src/factories/index.ts?");

/***/ }),

/***/ "./src/factories/line.factory.ts":
/*!***************************************!*\
  !*** ./src/factories/line.factory.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.LineFactory = void 0;\nconst line_1 = __webpack_require__(/*! ../models/line */ \"./src/models/line.ts\");\nconst properties_1 = __webpack_require__(/*! ../models/properties */ \"./src/models/properties.ts\");\nconst base_figure_factory_1 = __webpack_require__(/*! ./base-figure.factory */ \"./src/factories/base-figure.factory.ts\");\nclass LineFactory extends base_figure_factory_1.BaseFigureFactory {\n    constructor() {\n        super();\n    }\n    createFigure() {\n        const element = document.createElementNS(base_figure_factory_1.BaseFigureFactory.svgNS, \"line\");\n        const line = new line_1.Line(element);\n        line.properties = this.getProperties();\n        line.refreshProperties();\n        return line;\n    }\n    getProperties() {\n        const currentProps = [\n            new properties_1.NumberProperty(\"x1\", 0),\n            new properties_1.NumberProperty(\"y1\", 0),\n            new properties_1.NumberProperty(\"x2\", 50),\n            new properties_1.NumberProperty(\"y2\", 50),\n            new properties_1.NumberProperty(\"z-index\", (0, base_figure_factory_1.onCreateElement)(), \"z-index\"),\n        ].reduce((prev, curr) => (Object.assign(Object.assign({}, prev), { [curr.name]: curr })), {});\n        return Object.assign(Object.assign({}, Object.fromEntries(Object.entries(base_figure_factory_1.BaseFigureFactory.getBaseProperties(\"line\")).filter(([key]) => key !== \"fill\"))), currentProps);\n    }\n}\nexports.LineFactory = LineFactory;\n\n\n//# sourceURL=webpack://cg_fmi/./src/factories/line.factory.ts?");

/***/ }),

/***/ "./src/factories/polygon.factory.ts":
/*!******************************************!*\
  !*** ./src/factories/polygon.factory.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.PolygonFactory = void 0;\nconst properties_1 = __webpack_require__(/*! ../models/properties */ \"./src/models/properties.ts\");\nconst polygon_1 = __webpack_require__(/*! ../models/polygon */ \"./src/models/polygon.ts\");\nconst base_figure_factory_1 = __webpack_require__(/*! ./base-figure.factory */ \"./src/factories/base-figure.factory.ts\");\nclass PolygonFactory extends base_figure_factory_1.BaseFigureFactory {\n    createFigure() {\n        const element = document.createElementNS(base_figure_factory_1.BaseFigureFactory.svgNS, \"polygon\");\n        const polygon = new polygon_1.Polygon(element);\n        polygon.properties = this.getProperties();\n        polygon.refreshProperties();\n        return polygon;\n    }\n    getProperties() {\n        const isTriangle = Math.random() < 0.5;\n        const pointsValue = isTriangle\n            ? \"50,15 90,100 10,100\"\n            : \"20,20 80,20 100,40 80,60 20,60 0,40\";\n        const currentProps = [new properties_1.StringProperty(\"points\", pointsValue)].reduce((prev, curr) => (Object.assign(Object.assign({}, prev), { [curr.name]: curr })), {});\n        return Object.assign(Object.assign({}, base_figure_factory_1.BaseFigureFactory.getBaseProperties(\"polygon\")), currentProps);\n    }\n}\nexports.PolygonFactory = PolygonFactory;\n\n\n//# sourceURL=webpack://cg_fmi/./src/factories/polygon.factory.ts?");

/***/ }),

/***/ "./src/factories/rectangle.factory.ts":
/*!********************************************!*\
  !*** ./src/factories/rectangle.factory.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RectangleFactory = void 0;\nconst properties_1 = __webpack_require__(/*! ../models/properties */ \"./src/models/properties.ts\");\nconst rectangle_1 = __webpack_require__(/*! ../models/rectangle */ \"./src/models/rectangle.ts\");\nconst base_figure_factory_1 = __webpack_require__(/*! ./base-figure.factory */ \"./src/factories/base-figure.factory.ts\");\nclass RectangleFactory extends base_figure_factory_1.BaseFigureFactory {\n    createFigure() {\n        const element = document.createElementNS(base_figure_factory_1.BaseFigureFactory.svgNS, \"rect\");\n        const rectangle = new rectangle_1.Rectangle(element);\n        rectangle.properties = this.getProperties();\n        rectangle.refreshProperties();\n        return rectangle;\n    }\n    getProperties() {\n        const currentProps = [\n            new properties_1.NumberProperty(\"x\", 50),\n            new properties_1.NumberProperty(\"y\", 50),\n            new properties_1.NumberProperty(\"width\", 100),\n            new properties_1.NumberProperty(\"height\", 100),\n        ].reduce((prev, curr) => (Object.assign(Object.assign({}, prev), { [curr.name]: curr })), {});\n        return Object.assign(Object.assign({}, base_figure_factory_1.BaseFigureFactory.getBaseProperties(\"rectangle\")), currentProps);\n    }\n}\nexports.RectangleFactory = RectangleFactory;\n\n\n//# sourceURL=webpack://cg_fmi/./src/factories/rectangle.factory.ts?");

/***/ }),

/***/ "./src/figures-container.ts":
/*!**********************************!*\
  !*** ./src/figures-container.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.figuresContainer = void 0;\nconst base_figure_factory_1 = __webpack_require__(/*! ./factories/base-figure.factory */ \"./src/factories/base-figure.factory.ts\");\nconst group_factory_1 = __webpack_require__(/*! ./factories/group.factory */ \"./src/factories/group.factory.ts\");\nconst group_1 = __importDefault(__webpack_require__(/*! ./models/group */ \"./src/models/group.ts\"));\nconst properties_1 = __webpack_require__(/*! ./models/properties */ \"./src/models/properties.ts\");\nconst actions_1 = __webpack_require__(/*! ./ui/actions */ \"./src/ui/actions.ts\");\nconst create_prop_pane_1 = __webpack_require__(/*! ./ui/create-prop-pane */ \"./src/ui/create-prop-pane.ts\");\nconst drag_and_drop_1 = __webpack_require__(/*! ./ui/drag-and-drop */ \"./src/ui/drag-and-drop.ts\");\nconst svgRoot = document.querySelector(\"#svg-root\");\nconst treemap = document.querySelector(\"#treemap-figures\");\nconst createGroupButton = document.querySelector(\"#create-group-button\");\nconst clearCanvasButton = document.querySelector(\"#clear-canvas-button\");\nexports.figuresContainer = {\n    figures: [],\n    groups: [],\n    refreshOrder() {\n        this.figures.sort((fig1, fig2) => +fig1.properties[\"z-index\"].value - +fig2.properties[\"z-index\"].value);\n        this.groups.sort((group1, group2) => +group1.properties[\"z-index\"].value -\n            +group2.properties[\"z-index\"].value);\n        this.clearElement(svgRoot);\n        this.clearElement(treemap);\n        this.refreshTree();\n    },\n    refreshTree() {\n        this.clearElement(treemap);\n        this.groups.forEach((group) => this.createGroupTreeElement(group));\n        this.figures.forEach((fig) => this.createFigureTreeElement(fig));\n    },\n    add(figure) {\n        exports.figuresContainer.figures.push(figure);\n        svgRoot.appendChild(figure.svgElement);\n        (0, create_prop_pane_1.createPropPane)(figure);\n        this.refreshOrder();\n    },\n    addGroup(groupName) {\n        if (exports.figuresContainer.groups.find((group) => group.properties[\"groupName\"].value === groupName)) {\n            alert('Group \"' + groupName + '\" already exists');\n            return exports.figuresContainer.groups.find((group) => group.properties[\"groupName\"].value === groupName);\n        }\n        else if (groupName instanceof group_1.default) {\n            this.groups.push(groupName);\n            (0, drag_and_drop_1.dragAndDropBootstrap)(groupName);\n            this.refreshOrder();\n            return groupName;\n        }\n        const groupFactory = new group_factory_1.GroupFactory();\n        const group = groupFactory.createFigure(groupName);\n        this.groups.push(group);\n        (0, drag_and_drop_1.dragAndDropBootstrap)(group);\n        this.refreshOrder();\n        return group;\n    },\n    clearElement(element) {\n        while (element.firstChild) {\n            element.firstChild.remove();\n        }\n    },\n    createGroupTreeElement(group) {\n        const groupElement = document.createElement(\"li\");\n        const nameWrapper = this.createElement(\"span\", `Group: ${group.properties[\"groupName\"].value}`);\n        const deleteButton = this.createButton(\"X\", \"delete-button\", () => this.deleteGroup(group, groupElement));\n        const copyButton = this.createButton(\"Copy\", \"copy-button\", () => this.copyGroup(group));\n        const ul = document.createElement(\"ul\");\n        group.figures.forEach((fig) => ul.appendChild(this.createFigureInGroupTreeElement(fig, group)));\n        groupElement.appendChild(nameWrapper);\n        groupElement.appendChild(deleteButton);\n        groupElement.appendChild(copyButton);\n        groupElement.appendChild(ul);\n        groupElement.addEventListener(\"click\", (e) => {\n            const clickedFigure = group.figures.find((fig) => fig.properties[\"name\"].value === e.target.textContent);\n            if (e.target !== deleteButton &&\n                e.target === nameWrapper) {\n                (0, create_prop_pane_1.createGroupPropPane)(group);\n            }\n            else if (clickedFigure) {\n                (0, create_prop_pane_1.createPropPane)(clickedFigure);\n            }\n            else {\n                (0, create_prop_pane_1.closePropPane)();\n            }\n        });\n        treemap.appendChild(groupElement);\n        const g = group.svgElement ||\n            document.createElementNS(base_figure_factory_1.BaseFigureFactory.svgNS, \"g\");\n        group.figures.forEach((fig) => g.appendChild(fig.svgElement));\n        svgRoot.appendChild(g);\n        group.svgElement = g;\n        (0, drag_and_drop_1.dragAndDropBootstrap)(group);\n    },\n    createFigureTreeElement(fig) {\n        const figureElement = document.createElement(\"li\");\n        const nameWrapper = this.createElement(\"span\", fig.properties[\"name\"].value);\n        const deleteButton = this.createButton(\"X\", \"delete-button\", () => this.deleteFigure(fig, figureElement));\n        const addToGroupButton = this.createButton(\"+\", \"add-to-group-button\", () => this.addFigureToGroup(fig, figureElement));\n        figureElement.appendChild(nameWrapper);\n        figureElement.appendChild(deleteButton);\n        figureElement.appendChild(addToGroupButton);\n        figureElement.addEventListener(\"click\", (e) => {\n            if (e.target === deleteButton || e.target === addToGroupButton) {\n                (0, create_prop_pane_1.closePropPane)();\n            }\n            else {\n                (0, create_prop_pane_1.createPropPane)(fig);\n            }\n        });\n        treemap.appendChild(figureElement);\n        svgRoot.appendChild(fig.svgElement);\n    },\n    createFigureInGroupTreeElement(fig, group) {\n        const figureElement = document.createElement(\"li\");\n        const nameWrapper = this.createElement(\"span\", fig.properties[\"name\"].value);\n        const deleteButton = this.createButton(\"X\", \"delete-button\", () => this.deleteFigureFromGroup(fig, group, figureElement));\n        const removeFromGroupButton = this.createButton(\"-\", \"remove-from-group-button\", () => this.removeFigureFromGroup(fig, group, figureElement));\n        figureElement.appendChild(nameWrapper);\n        figureElement.appendChild(deleteButton);\n        figureElement.appendChild(removeFromGroupButton);\n        figureElement.addEventListener(\"click\", (e) => {\n            if (e.target === deleteButton || e.target === removeFromGroupButton) {\n                (0, create_prop_pane_1.closePropPane)();\n            }\n            else {\n                (0, create_prop_pane_1.createPropPane)(fig);\n            }\n        });\n        return figureElement;\n    },\n    createElement(tag, textContent) {\n        const element = document.createElement(tag);\n        element.textContent = textContent;\n        return element;\n    },\n    createButton(text, className, onClick) {\n        const button = document.createElement(\"button\");\n        button.textContent = text;\n        button.classList.add(className);\n        button.addEventListener(\"click\", onClick);\n        return button;\n    },\n    copyGroup(group) {\n        const groupFactory = new group_factory_1.GroupFactory();\n        const copiedGroup = groupFactory.createFigure(group.properties[\"groupName\"].value + \"-copy\");\n        group.figures.forEach((figure) => {\n            const copiedFigure = (0, actions_1.Copy)(figure);\n            if (copiedFigure) {\n                (0, drag_and_drop_1.dragAndDropBootstrap)(copiedFigure);\n                copiedGroup.figures.push(copiedFigure);\n            }\n        });\n        copiedGroup.properties = {};\n        Object.keys(group.properties).map((key) => {\n            const property = Object.assign({}, group.properties[key]);\n            const withProto = Object.setPrototypeOf(property, Object.getPrototypeOf(group.properties[key]));\n            copiedGroup.properties[key] = withProto;\n        });\n        copiedGroup.properties[\"groupName\"] = new properties_1.NameProperty(\"groupName\", `${copiedGroup.properties[\"groupName\"].value}-copy`);\n        copiedGroup.refreshProperties();\n        this.refreshOrder();\n        this.addGroup(copiedGroup);\n    },\n    deleteFigure(fig, figureElement) {\n        this.figures = this.figures.filter((f) => f !== fig);\n        figureElement.remove();\n        fig.svgElement.remove();\n        this.refreshOrder();\n    },\n    deleteGroup(group, groupElement) {\n        this.groups = this.groups.filter((g) => g !== group);\n        groupElement.remove();\n        group.figures.forEach((fig) => fig.svgElement.remove());\n        this.refreshOrder();\n    },\n    deleteFigureFromGroup(fig, group, figureElement) {\n        group.figures = group.figures.filter((f) => f !== fig);\n        figureElement.remove();\n        fig.svgElement.remove();\n        this.refreshOrder();\n    },\n    removeFigureFromGroup(fig, group, figureElement) {\n        group.removeFigure(fig);\n        figureElement.remove();\n        this.add(fig);\n        this.refreshOrder();\n    },\n    addFigureToGroup(fig, figureElement) {\n        const groupName = prompt(\"Select the group name:\");\n        let group = this.groups.find((group) => group.properties[\"groupName\"].value === groupName);\n        if (!groupName) {\n            return;\n        }\n        if (!group) {\n            exports.figuresContainer.addGroup(groupName);\n            group = this.groups.find((group) => group.properties[\"groupName\"].value === groupName);\n        }\n        fig.svgElement.addEventListener(\"click\", () => {\n            if (group) {\n                (0, create_prop_pane_1.createGroupPropPane)(group);\n            }\n            else {\n                (0, create_prop_pane_1.createPropPane)(fig);\n            }\n        });\n        fig.svgElement.addEventListener(\"dblclick\", () => {\n            if (group) {\n                (0, create_prop_pane_1.createPropPane)(fig);\n            }\n        });\n        group.addFigure(fig);\n        this.figures = this.figures.filter((f) => f !== fig);\n        figureElement.remove();\n        this.refreshOrder();\n    },\n};\ncreateGroupButton.addEventListener(\"click\", () => {\n    const groupName = prompt(\"Enter the group name:\");\n    if (groupName) {\n        exports.figuresContainer.addGroup(groupName);\n    }\n});\nclearCanvasButton.addEventListener(\"click\", () => {\n    exports.figuresContainer.figures = [];\n    exports.figuresContainer.groups = [];\n    exports.figuresContainer.refreshOrder();\n    (0, create_prop_pane_1.closePropPane)();\n});\n\n\n//# sourceURL=webpack://cg_fmi/./src/figures-container.ts?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst create_prop_pane_1 = __webpack_require__(/*! ./ui/create-prop-pane */ \"./src/ui/create-prop-pane.ts\");\nconst bootstrap_persistence_1 = __webpack_require__(/*! ./ui/bootstrap-persistence */ \"./src/ui/bootstrap-persistence.ts\");\nconst actions_1 = __webpack_require__(/*! ./ui/actions */ \"./src/ui/actions.ts\");\nconst selected_figure_1 = __webpack_require__(/*! ./ui/selected-figure */ \"./src/ui/selected-figure.ts\");\nconst drag_and_drop_1 = __webpack_require__(/*! ./ui/drag-and-drop */ \"./src/ui/drag-and-drop.ts\");\nconst copied_figure_1 = __webpack_require__(/*! ./ui/copied-figure */ \"./src/ui/copied-figure.ts\");\nconst figure_chooser_1 = __webpack_require__(/*! ./ui/figure-chooser */ \"./src/ui/figure-chooser.ts\");\nconst init_svg_root_1 = __webpack_require__(/*! ./ui/init-svg-root */ \"./src/ui/init-svg-root.ts\");\nconst search_bar_1 = __webpack_require__(/*! ./ui/search-bar */ \"./src/ui/search-bar.ts\");\nconst svgRoot = document.querySelector(\"#svg-root\");\nconst initializeKeyboardShortcuts = () => {\n    document.addEventListener(\"keydown\", (event) => {\n        const selectedFigure = (0, selected_figure_1.getSelectedFigure)();\n        if (event.key === \"Delete\") {\n            (0, actions_1.Delete)(selectedFigure);\n            return;\n        }\n        if (!event.ctrlKey) {\n            return;\n        }\n        if (event.key === \"v\") {\n            (0, actions_1.Paste)((0, copied_figure_1.getCopiedFigure)());\n            return;\n        }\n        if (event.key === \"c\" && selectedFigure) {\n            const t = (0, actions_1.Copy)(selectedFigure);\n            (0, copied_figure_1.setCopiedFigure)(t);\n            t === null || t === void 0 ? void 0 : t.svgElement.addEventListener(\"click\", () => {\n                (0, selected_figure_1.setSelectedFigure)(t);\n                (0, create_prop_pane_1.createPropPane)(t);\n            });\n        }\n    });\n};\nconst bootstrap = () => {\n    (0, figure_chooser_1.initializeFiguresChooser)();\n    (0, bootstrap_persistence_1.bootstrapPersistence)(drag_and_drop_1.dragAndDropBootstrap);\n    (0, init_svg_root_1.initializeSvgRoot)();\n    (0, search_bar_1.initializeSearchInput)();\n    initializeKeyboardShortcuts();\n};\nbootstrap();\n\n\n//# sourceURL=webpack://cg_fmi/./src/index.ts?");

/***/ }),

/***/ "./src/models/circle.ts":
/*!******************************!*\
  !*** ./src/models/circle.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Circle = void 0;\nconst figure_1 = __importDefault(__webpack_require__(/*! ./figure */ \"./src/models/figure.ts\"));\nclass Circle extends figure_1.default {\n    constructor(svgEl) {\n        super(svgEl);\n    }\n}\nexports.Circle = Circle;\n\n\n//# sourceURL=webpack://cg_fmi/./src/models/circle.ts?");

/***/ }),

/***/ "./src/models/ellipse.ts":
/*!*******************************!*\
  !*** ./src/models/ellipse.ts ***!
  \*******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Ellipse = void 0;\nconst figure_1 = __importDefault(__webpack_require__(/*! ./figure */ \"./src/models/figure.ts\"));\nclass Ellipse extends figure_1.default {\n    constructor(svgEl) {\n        super(svgEl);\n    }\n}\nexports.Ellipse = Ellipse;\n\n\n//# sourceURL=webpack://cg_fmi/./src/models/ellipse.ts?");

/***/ }),

/***/ "./src/models/figure.ts":
/*!******************************!*\
  !*** ./src/models/figure.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nclass Figure {\n    refreshProperties() {\n        Object.keys(this.properties).forEach((key) => {\n            const el = this.properties[key];\n            this.svgElement.setAttributeNS(null, el.name, el.value);\n        });\n        const transforms = [];\n        const scaleX = this.properties[\"scaleX\"];\n        const scaleY = this.properties[\"scaleY\"];\n        if (scaleX || scaleY) {\n            transforms.push(` scale(${scaleX.value}, ${scaleY.value})`);\n        }\n        const rotate = this.properties[\"rotate\"];\n        const rotateOrigin = this.properties[\"transform-origin\"];\n        this.svgElement.style.transformOrigin = rotateOrigin.value;\n        if (rotate && rotateOrigin) {\n            transforms.push(`rotate(${rotate.value})`);\n        }\n        const translateX = this.properties[\"translateX\"];\n        const translateY = this.properties[\"translateY\"];\n        if (translateX || translateY) {\n            transforms.push(`translate(${translateX.value}, ${translateY.value})`);\n        }\n        this.svgElement.setAttributeNS(null, \"transform\", transforms.join(\" \"));\n    }\n    constructor(svgElement) {\n        this.svgElement = svgElement;\n        this.properties = {};\n    }\n}\nexports[\"default\"] = Figure;\n\n\n//# sourceURL=webpack://cg_fmi/./src/models/figure.ts?");

/***/ }),

/***/ "./src/models/group.ts":
/*!*****************************!*\
  !*** ./src/models/group.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst figure_1 = __importDefault(__webpack_require__(/*! ./figure */ \"./src/models/figure.ts\"));\nclass Group extends figure_1.default {\n    constructor(svgEl) {\n        super(svgEl);\n        this.figures = [];\n        this.properties = {};\n    }\n    addFigure(figure) {\n        this.figures.push(figure);\n    }\n    removeFigure(figure) {\n        const index = this.figures.indexOf(figure);\n        if (index !== -1) {\n            this.figures.splice(index, 1);\n        }\n    }\n}\nexports[\"default\"] = Group;\n\n\n//# sourceURL=webpack://cg_fmi/./src/models/group.ts?");

/***/ }),

/***/ "./src/models/line.ts":
/*!****************************!*\
  !*** ./src/models/line.ts ***!
  \****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Line = void 0;\nconst figure_1 = __importDefault(__webpack_require__(/*! ./figure */ \"./src/models/figure.ts\"));\nclass Line extends figure_1.default {\n    constructor(svgEl) {\n        super(svgEl);\n    }\n}\nexports.Line = Line;\n\n\n//# sourceURL=webpack://cg_fmi/./src/models/line.ts?");

/***/ }),

/***/ "./src/models/polygon.ts":
/*!*******************************!*\
  !*** ./src/models/polygon.ts ***!
  \*******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Polygon = void 0;\nconst figure_1 = __importDefault(__webpack_require__(/*! ./figure */ \"./src/models/figure.ts\"));\nclass Polygon extends figure_1.default {\n    constructor(svgEl) {\n        super(svgEl);\n    }\n}\nexports.Polygon = Polygon;\n\n\n//# sourceURL=webpack://cg_fmi/./src/models/polygon.ts?");

/***/ }),

/***/ "./src/models/properties.ts":
/*!**********************************!*\
  !*** ./src/models/properties.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.NameProperty = exports.EnumProperty = exports.PercentageProperty = exports.ColorProperty = exports.StringProperty = exports.NumberProperty = exports.Property = exports.ValueType = void 0;\nvar ValueType;\n(function (ValueType) {\n    ValueType[ValueType[\"Number\"] = 0] = \"Number\";\n    ValueType[ValueType[\"String\"] = 1] = \"String\";\n    ValueType[ValueType[\"Color\"] = 2] = \"Color\";\n    ValueType[ValueType[\"Percent\"] = 3] = \"Percent\";\n    ValueType[ValueType[\"Enums\"] = 4] = \"Enums\";\n})(ValueType || (exports.ValueType = ValueType = {}));\nclass Property {\n    constructor(name, valueType) {\n        this.value = \"\";\n        this.name = name;\n        this.valueType = valueType;\n        this.alias = name;\n    }\n}\nexports.Property = Property;\nclass NumberProperty extends Property {\n    constructor(name, value, alias = name, min = 0, max = Number.MAX_VALUE) {\n        super(name, ValueType.Number);\n        this.min = min;\n        this.max = max;\n        this.value = \"\" + value;\n        this.alias = alias;\n    }\n    validate(value) {\n        return !(value < this.min || value > this.max);\n    }\n}\nexports.NumberProperty = NumberProperty;\nclass StringProperty extends Property {\n    constructor(name, value, alias = name) {\n        super(name, ValueType.String);\n        this.value = value;\n        this.alias = alias;\n    }\n    validate(value) {\n        return !(value == \"\");\n    }\n}\nexports.StringProperty = StringProperty;\nclass ColorProperty extends Property {\n    constructor(name, value, alias = name) {\n        super(name, ValueType.Color);\n        this.value = value;\n        this.alias = alias;\n    }\n    validate(value) {\n        return /^#[0-9A-F]{6}$/i.test(value);\n    }\n}\nexports.ColorProperty = ColorProperty;\nclass PercentageProperty extends Property {\n    constructor(name, value, alias = name) {\n        super(name, ValueType.Percent);\n        this.value = value.toString();\n        this.alias = alias;\n    }\n    validate(value) {\n        return +value >= 0 && +value <= 1;\n    }\n}\nexports.PercentageProperty = PercentageProperty;\nclass EnumProperty extends Property {\n    constructor(name, value, allowedValues, alias = name) {\n        super(name, ValueType.Enums);\n        this.value = value;\n        this.allowedValues = allowedValues;\n        this.alias = alias;\n    }\n    validate(value) {\n        return this.allowedValues.includes(value);\n    }\n}\nexports.EnumProperty = EnumProperty;\nclass NameProperty extends Property {\n    constructor(name, defaultValue) {\n        super(name, ValueType.String);\n        this.value = defaultValue;\n    }\n    validate(value) {\n        return typeof value === \"string\";\n    }\n}\nexports.NameProperty = NameProperty;\n\n\n//# sourceURL=webpack://cg_fmi/./src/models/properties.ts?");

/***/ }),

/***/ "./src/models/rectangle.ts":
/*!*********************************!*\
  !*** ./src/models/rectangle.ts ***!
  \*********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Rectangle = void 0;\nconst figure_1 = __importDefault(__webpack_require__(/*! ./figure */ \"./src/models/figure.ts\"));\nclass Rectangle extends figure_1.default {\n    constructor(svgEl) {\n        super(svgEl);\n    }\n}\nexports.Rectangle = Rectangle;\n\n\n//# sourceURL=webpack://cg_fmi/./src/models/rectangle.ts?");

/***/ }),

/***/ "./src/ui/actions.ts":
/*!***************************!*\
  !*** ./src/ui/actions.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Delete = exports.Paste = exports.Copy = void 0;\nconst figures_container_1 = __webpack_require__(/*! ../figures-container */ \"./src/figures-container.ts\");\nconst properties_1 = __webpack_require__(/*! ../models/properties */ \"./src/models/properties.ts\");\nconst create_prop_pane_1 = __webpack_require__(/*! ./create-prop-pane */ \"./src/ui/create-prop-pane.ts\");\nconst factories_1 = __webpack_require__(/*! ../factories */ \"./src/factories/index.ts\");\nconst drag_and_drop_1 = __webpack_require__(/*! ./drag-and-drop */ \"./src/ui/drag-and-drop.ts\");\nfunction Copy(selectedFigure) {\n    let copiedFigure = null;\n    const figureFactory = factories_1.figureFactories.find((factory) => factory.constructor.name === selectedFigure.constructor.name + \"Factory\");\n    if (!figureFactory) {\n        return null;\n    }\n    copiedFigure = figureFactory.createFigure();\n    copiedFigure.properties = {};\n    Object.keys(selectedFigure.properties).map((key) => {\n        const property = Object.assign({}, selectedFigure.properties[key]);\n        const withProto = Object.setPrototypeOf(property, Object.getPrototypeOf(selectedFigure.properties[key]));\n        copiedFigure.properties[key] = withProto;\n    });\n    copiedFigure.properties[\"name\"] = new properties_1.NameProperty(\"name\", `${copiedFigure.properties[\"name\"].value}-copy`);\n    copiedFigure.properties[\"translateX\"] = new properties_1.NumberProperty(\"translateX\", 0, \"Translate X\");\n    copiedFigure.properties[\"translateY\"] = new properties_1.NumberProperty(\"translateY\", 0, \"Translate Y\");\n    // add needed properties\n    copiedFigure.refreshProperties();\n    return copiedFigure;\n}\nexports.Copy = Copy;\nfunction Paste(copiedFigure) {\n    if (copiedFigure && !figures_container_1.figuresContainer.figures.includes(copiedFigure)) {\n        figures_container_1.figuresContainer.add(copiedFigure);\n        (0, drag_and_drop_1.dragAndDropBootstrap)(copiedFigure);\n    }\n    else if (copiedFigure) {\n        copiedFigure = Copy(copiedFigure);\n        Paste(copiedFigure);\n    }\n}\nexports.Paste = Paste;\nfunction Delete(selectedFigure) {\n    figures_container_1.figuresContainer.figures = figures_container_1.figuresContainer.figures.filter((f) => f !== selectedFigure);\n    figures_container_1.figuresContainer.refreshOrder();\n    (0, create_prop_pane_1.closePropPane)();\n}\nexports.Delete = Delete;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/actions.ts?");

/***/ }),

/***/ "./src/ui/bootstrap-persistence.ts":
/*!*****************************************!*\
  !*** ./src/ui/bootstrap-persistence.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.bootstrapPersistence = void 0;\nconst figures_container_1 = __webpack_require__(/*! ../figures-container */ \"./src/figures-container.ts\");\nconst svgRoot = document.querySelector(\"#svg-root\");\nconst factories_1 = __webpack_require__(/*! ../factories */ \"./src/factories/index.ts\");\nconst drag_and_drop_1 = __webpack_require__(/*! ./drag-and-drop */ \"./src/ui/drag-and-drop.ts\");\nconst figure_listener_1 = __webpack_require__(/*! ./figure-listener */ \"./src/ui/figure-listener.ts\");\nconst bootstrapPersistence = (dragAndDrop) => {\n    document.querySelector(\"#download-png\").addEventListener(\"click\", () => {\n        const svgData = new XMLSerializer().serializeToString(svgRoot);\n        const svgDataBase64 = btoa(unescape(encodeURIComponent(svgData)));\n        const svgDataUrl = `data:image/svg+xml;charset=utf-8;base64,${svgDataBase64}`;\n        const image = new Image();\n        image.addEventListener(\"load\", () => {\n            const rect = svgRoot.getBoundingClientRect();\n            const width = rect.width || 1000;\n            const height = rect.height || 500;\n            const canvas = document.createElement(\"canvas\");\n            canvas.setAttribute(\"width\", width.toString());\n            canvas.setAttribute(\"height\", height.toString());\n            const context = canvas.getContext(\"2d\");\n            context.drawImage(image, 0, 0, width, height);\n            const dataUrl = canvas.toDataURL(\"image/png\");\n            const link = document.createElement(\"a\");\n            link.download = \"image.png\";\n            link.href = dataUrl;\n            link.click();\n        });\n        image.src = svgDataUrl;\n    });\n    const saveFunction = () => {\n        const figuresToSave = figures_container_1.figuresContainer.figures.map((figure) => ({\n            type: figure.constructor.name,\n            properties: figure.properties,\n        }));\n        const groupsToSave = figures_container_1.figuresContainer.groups.map((group) => ({\n            type: group.constructor.name,\n            properties: group.properties,\n            children: group.figures.map((figure) => ({\n                type: figure.constructor.name,\n                properties: figure.properties,\n            })),\n        }));\n        const link = document.createElement(\"a\");\n        link.download = \"figures.json\";\n        const toSave = { figuresToSave, groupsToSave };\n        const figuresJSON = JSON.stringify(toSave);\n        link.href = `data:text/json;charset=utf-8,${encodeURIComponent(figuresJSON)}`;\n        link.click();\n    };\n    document\n        .querySelector(\"#download-json\")\n        .addEventListener(\"click\", saveFunction);\n    const loadFunction = () => {\n        const input = document.createElement(\"input\");\n        input.type = \"file\";\n        input.accept = \".json\";\n        input.addEventListener(\"change\", (e) => {\n            var _a;\n            const file = (_a = e.target.files) === null || _a === void 0 ? void 0 : _a[0];\n            if (!file)\n                return;\n            const reader = new FileReader();\n            reader.readAsText(file);\n            reader.addEventListener(\"load\", (e) => {\n                figures_container_1.figuresContainer.figures = [];\n                const figures = JSON.parse(e.target.result);\n                figures.figuresToSave.forEach((figure) => {\n                    var _a;\n                    const newFigure = (_a = factories_1.figureFactories\n                        .find((factory) => factory.constructor.name === figure.type + \"Factory\")) === null || _a === void 0 ? void 0 : _a.createFigure();\n                    if (!newFigure) {\n                        alert(\"failed to import figure: \" + figure.type);\n                        return;\n                    }\n                    Object.keys(figure.properties).forEach((key) => {\n                        const prop = figure.properties[key];\n                        newFigure.properties[key].value = prop.value;\n                    });\n                    newFigure.refreshProperties();\n                    figures_container_1.figuresContainer.add(newFigure);\n                    (0, figure_listener_1.initFigureEventListeners)(newFigure);\n                    (0, drag_and_drop_1.dragAndDropBootstrap)(newFigure);\n                });\n                figures.groupsToSave.forEach((savedGroup) => {\n                    const createdGroup = figures_container_1.figuresContainer.addGroup(savedGroup.properties[\"groupName\"].value || \"group\");\n                    Object.keys(savedGroup.properties).forEach((key) => {\n                        const prop = savedGroup.properties[key];\n                        createdGroup.properties[key].value = prop.value;\n                    });\n                    createdGroup.refreshProperties();\n                    console.log(createdGroup);\n                    savedGroup.children.forEach((savedFigure) => {\n                        var _a;\n                        const newFigure = (_a = factories_1.figureFactories\n                            .find((factory) => factory.constructor.name === savedFigure.type + \"Factory\")) === null || _a === void 0 ? void 0 : _a.createFigure();\n                        if (!newFigure) {\n                            alert(\"failed to import figure: \" + savedFigure.type);\n                            return;\n                        }\n                        Object.keys(savedFigure.properties).forEach((key) => {\n                            const prop = savedFigure.properties[key];\n                            newFigure.properties[key].value = prop.value;\n                        });\n                        newFigure.refreshProperties();\n                        createdGroup.addFigure(newFigure);\n                        (0, figure_listener_1.initFigureEventListeners)(newFigure);\n                        (0, drag_and_drop_1.dragAndDropBootstrap)(newFigure);\n                    });\n                });\n                figures_container_1.figuresContainer.refreshOrder();\n            });\n        });\n        input.click();\n    };\n    document\n        .querySelector(\"#import-json\")\n        .addEventListener(\"click\", loadFunction);\n    document.addEventListener(\"keydown\", (e) => {\n        if (e.key === \"s\" && (e.ctrlKey || e.metaKey)) {\n            e.preventDefault();\n            saveFunction();\n        }\n    });\n};\nexports.bootstrapPersistence = bootstrapPersistence;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/bootstrap-persistence.ts?");

/***/ }),

/***/ "./src/ui/copied-figure.ts":
/*!*********************************!*\
  !*** ./src/ui/copied-figure.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.setCopiedFigure = exports.getCopiedFigure = void 0;\nlet _copiedFigure = null;\nfunction getCopiedFigure() {\n    return _copiedFigure;\n}\nexports.getCopiedFigure = getCopiedFigure;\nfunction setCopiedFigure(figure) {\n    _copiedFigure = figure;\n}\nexports.setCopiedFigure = setCopiedFigure;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/copied-figure.ts?");

/***/ }),

/***/ "./src/ui/create-button.ts":
/*!*********************************!*\
  !*** ./src/ui/create-button.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createButton = void 0;\nconst createButton = (text, className, onClick) => {\n    const button = document.createElement(\"button\");\n    button.textContent = text;\n    button.className = className;\n    button.addEventListener(\"click\", onClick);\n    return button;\n};\nexports.createButton = createButton;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/create-button.ts?");

/***/ }),

/***/ "./src/ui/create-prop-pane.ts":
/*!************************************!*\
  !*** ./src/ui/create-prop-pane.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createGroupPropPane = exports.closePropPane = exports.createPropPane = void 0;\nconst figures_container_1 = __webpack_require__(/*! ../figures-container */ \"./src/figures-container.ts\");\nconst properties_1 = __webpack_require__(/*! ../models/properties */ \"./src/models/properties.ts\");\nconst propertiesTab = document.querySelector(\"#properties-tab\");\nconst generatePropPane = (entity) => {\n    while (propertiesTab === null || propertiesTab === void 0 ? void 0 : propertiesTab.firstChild) {\n        propertiesTab.firstChild.remove();\n    }\n    Object.keys(entity.properties).forEach((key) => {\n        const property = entity.properties[key];\n        const wrapper = document.createElement(\"div\");\n        wrapper.classList.add(\"form-group\");\n        const label = document.createElement(\"label\");\n        label.textContent = property.alias;\n        label.htmlFor = property.name;\n        wrapper.appendChild(label);\n        propertiesTab.appendChild(wrapper);\n        let inputElement = document.createElement(\"input\");\n        const inputTypeMap = {\n            [properties_1.ValueType.Number]: \"number\",\n            [properties_1.ValueType.String]: \"text\",\n            [properties_1.ValueType.Color]: \"color\",\n            [properties_1.ValueType.Percent]: \"number\",\n            [properties_1.ValueType.Enums]: \"\",\n        };\n        switch (property.valueType) {\n            case properties_1.ValueType.Enums:\n                inputElement = document.createElement(\"select\");\n                property.allowedValues.forEach((value) => {\n                    const option = document.createElement(\"option\");\n                    option.value = value;\n                    option.text = value;\n                    inputElement.appendChild(option);\n                });\n                inputElement.value = property.value;\n                break;\n            case properties_1.ValueType.Percent:\n                inputElement.step = \"0.01\";\n                inputElement.type =\n                    inputTypeMap[property.valueType];\n                inputElement.value = property.value;\n                break;\n            default:\n                inputElement.type =\n                    inputTypeMap[property.valueType];\n                inputElement.value = property.value;\n        }\n        wrapper.appendChild(inputElement);\n        let prevValue = property.value;\n        inputElement.addEventListener(\"input\", (e) => {\n            if (!property.validate(inputElement.value)) {\n                e.preventDefault();\n                inputElement.value = prevValue;\n                return;\n            }\n            prevValue = inputElement.value;\n            entity.properties[property.name].value = inputElement.value;\n            if (property.name === \"z-index\") {\n                figures_container_1.figuresContainer.refreshOrder();\n            }\n            if (property.name === \"name\" || property.name === \"groupName\") {\n                figures_container_1.figuresContainer.refreshTree();\n            }\n            entity.refreshProperties();\n        });\n        propertiesTab.appendChild(wrapper);\n    });\n};\nconst createPropPane = (figure) => {\n    generatePropPane(figure);\n};\nexports.createPropPane = createPropPane;\nconst closePropPane = () => {\n    propertiesTab.innerHTML = \"\";\n};\nexports.closePropPane = closePropPane;\nconst createGroupPropPane = (group) => {\n    generatePropPane(group);\n};\nexports.createGroupPropPane = createGroupPropPane;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/create-prop-pane.ts?");

/***/ }),

/***/ "./src/ui/drag-and-drop.ts":
/*!*********************************!*\
  !*** ./src/ui/drag-and-drop.ts ***!
  \*********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.dragAndDropBootstrap = void 0;\nconst figures_container_1 = __webpack_require__(/*! ../figures-container */ \"./src/figures-container.ts\");\nconst group_1 = __importDefault(__webpack_require__(/*! ../models/group */ \"./src/models/group.ts\"));\nconst svgRoot = document.querySelector(\"#svg-root\");\nconst dragAndDropBootstrap = (entity) => {\n    if (entity instanceof group_1.default)\n        return;\n    entity.svgElement.addEventListener(\"mousedown\", (e) => {\n        var _a, _b;\n        const startX = e.clientX;\n        const startY = e.clientY;\n        const startTranslateY = +((_a = entity.properties[\"translateY\"]) === null || _a === void 0 ? void 0 : _a.value) || 0;\n        const startTranslateX = +((_b = entity.properties[\"translateX\"]) === null || _b === void 0 ? void 0 : _b.value) || 0;\n        const moveAt = (e) => {\n            const currentX = e.clientX;\n            const currentY = e.clientY;\n            const ctm = svgRoot.getScreenCTM();\n            const parentGroup = figures_container_1.figuresContainer.groups.find((group) => group.figures.includes(entity));\n            const parentScaleX = +((parentGroup === null || parentGroup === void 0 ? void 0 : parentGroup.properties[\"scaleX\"].value) || 1);\n            const parentScaleY = +((parentGroup === null || parentGroup === void 0 ? void 0 : parentGroup.properties[\"scaleY\"].value) || 1);\n            const parentRotate = +((parentGroup === null || parentGroup === void 0 ? void 0 : parentGroup.properties[\"rotate\"].value) || 1);\n            const rotate = +entity.properties[\"rotate\"].value + parentRotate;\n            const scaleX = +entity.properties[\"scaleX\"].value * parentScaleX;\n            const scaleY = +entity.properties[\"scaleY\"].value * parentScaleY;\n            const radians = rotate * (Math.PI / 180);\n            const dx = (currentX - startX) / ctm.a / scaleX;\n            const dy = (currentY - startY) / ctm.d / scaleY;\n            const rotatedDx = dx * Math.cos(-radians) - dy * Math.sin(-radians);\n            const rotatedDy = dx * Math.sin(-radians) + dy * Math.cos(-radians);\n            entity.properties[\"translateX\"].value = (startTranslateX + rotatedDx).toString();\n            entity.properties[\"translateY\"].value = (startTranslateY + rotatedDy).toString();\n            entity.refreshProperties();\n        };\n        const stopMoving = () => {\n            document.removeEventListener(\"mousemove\", moveAt);\n            document.removeEventListener(\"mouseup\", stopMoving);\n        };\n        document.addEventListener(\"mousemove\", moveAt);\n        document.addEventListener(\"mouseup\", stopMoving);\n    });\n};\nexports.dragAndDropBootstrap = dragAndDropBootstrap;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/drag-and-drop.ts?");

/***/ }),

/***/ "./src/ui/figure-chooser.ts":
/*!**********************************!*\
  !*** ./src/ui/figure-chooser.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.initializeFiguresChooser = void 0;\nconst factories_1 = __webpack_require__(/*! ../factories */ \"./src/factories/index.ts\");\nconst figures_container_1 = __webpack_require__(/*! ../figures-container */ \"./src/figures-container.ts\");\nconst create_button_1 = __webpack_require__(/*! ./create-button */ \"./src/ui/create-button.ts\");\nconst drag_and_drop_1 = __webpack_require__(/*! ./drag-and-drop */ \"./src/ui/drag-and-drop.ts\");\nconst figure_listener_1 = __webpack_require__(/*! ./figure-listener */ \"./src/ui/figure-listener.ts\");\nconst figuresChooser = document.querySelector(\"#figures-chooser\");\nconst initializeFiguresChooser = () => {\n    factories_1.figureFactories.forEach((factory) => {\n        const button = (0, create_button_1.createButton)(factory.constructor.name, \"\", () => {\n            const newFigure = factory.createFigure();\n            (0, figure_listener_1.initFigureEventListeners)(newFigure);\n            figures_container_1.figuresContainer.add(newFigure);\n            (0, drag_and_drop_1.dragAndDropBootstrap)(newFigure);\n        });\n        figuresChooser.appendChild(button);\n    });\n};\nexports.initializeFiguresChooser = initializeFiguresChooser;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/figure-chooser.ts?");

/***/ }),

/***/ "./src/ui/figure-listener.ts":
/*!***********************************!*\
  !*** ./src/ui/figure-listener.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.initFigureEventListeners = void 0;\nconst create_prop_pane_1 = __webpack_require__(/*! ./create-prop-pane */ \"./src/ui/create-prop-pane.ts\");\nconst selected_figure_1 = __webpack_require__(/*! ./selected-figure */ \"./src/ui/selected-figure.ts\");\nconst initFigureEventListeners = (figure) => {\n    figure.svgElement.addEventListener(\"click\", () => {\n        (0, selected_figure_1.setSelectedFigure)(figure);\n        (0, create_prop_pane_1.createPropPane)(figure);\n    });\n};\nexports.initFigureEventListeners = initFigureEventListeners;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/figure-listener.ts?");

/***/ }),

/***/ "./src/ui/init-svg-root.ts":
/*!*********************************!*\
  !*** ./src/ui/init-svg-root.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.initializeSvgRoot = void 0;\nconst factories_1 = __webpack_require__(/*! ../factories */ \"./src/factories/index.ts\");\nconst figures_container_1 = __webpack_require__(/*! ../figures-container */ \"./src/figures-container.ts\");\nconst actions_1 = __webpack_require__(/*! ./actions */ \"./src/ui/actions.ts\");\nconst copied_figure_1 = __webpack_require__(/*! ./copied-figure */ \"./src/ui/copied-figure.ts\");\nconst create_button_1 = __webpack_require__(/*! ./create-button */ \"./src/ui/create-button.ts\");\nconst create_prop_pane_1 = __webpack_require__(/*! ./create-prop-pane */ \"./src/ui/create-prop-pane.ts\");\nconst drag_and_drop_1 = __webpack_require__(/*! ./drag-and-drop */ \"./src/ui/drag-and-drop.ts\");\nconst figure_listener_1 = __webpack_require__(/*! ./figure-listener */ \"./src/ui/figure-listener.ts\");\nconst selected_figure_1 = __webpack_require__(/*! ./selected-figure */ \"./src/ui/selected-figure.ts\");\nconst to_svg_coordinates_1 = __webpack_require__(/*! ./to-svg-coordinates */ \"./src/ui/to-svg-coordinates.ts\");\nconst tooltip = document.querySelector(\"#tooltip\");\nconst svgRoot = document.querySelector(\"#svg-root\");\nconst initializeSvgRoot = () => {\n    let scale = 1;\n    const scaleFactor = 1.1;\n    const zoom = (event) => {\n        event.preventDefault();\n        const { left, top, width, height } = svgRoot.getBoundingClientRect();\n        const { clientX, clientY, deltaY } = event;\n        const scaleFactor = deltaY < 0 ? 1.1 : 1 / 1.1;\n        const zoomScale = scale * scaleFactor;\n        const xOffset = (clientX - left) / width;\n        const yOffset = (clientY - top) / height;\n        const originX = xOffset * 100;\n        const originY = yOffset * 100;\n        scale = Math.max(zoomScale, 1);\n        svgRoot.style.transformOrigin = `${originX}% ${originY}%`;\n        svgRoot.style.transform = `scale(${scale})`;\n    };\n    svgRoot.addEventListener(\"wheel\", zoom);\n    svgRoot.addEventListener(\"click\", (e) => {\n        if (e.target === svgRoot) {\n            (0, create_prop_pane_1.closePropPane)();\n            tooltip.style.display = \"none\";\n        }\n    });\n    svgRoot.addEventListener(\"contextmenu\", (e) => {\n        e.preventDefault();\n        const mouseX = e.clientX;\n        const mouseY = e.clientY;\n        tooltip.style.left = `${mouseX}px`;\n        tooltip.style.top = `${mouseY}px`;\n        tooltip.style.display = \"flex\";\n        tooltip.style.flexDirection = \"column\";\n        const insertButton = (0, create_button_1.createButton)(\"Insert\", \"\", () => {\n            tooltip.innerHTML = \"\";\n            factories_1.figureFactories.forEach((factory) => {\n                const factoryButton = (0, create_button_1.createButton)(factory.constructor.name.replace(\"Factory\", \"\"), \"\", () => {\n                    const newFigure = factory.createFigure();\n                    (0, to_svg_coordinates_1.changeToSvgCoordinates)(mouseX, mouseY, newFigure);\n                    (0, figure_listener_1.initFigureEventListeners)(newFigure);\n                    (0, drag_and_drop_1.dragAndDropBootstrap)(newFigure);\n                    newFigure.refreshProperties();\n                    figures_container_1.figuresContainer.add(newFigure);\n                    tooltip.style.display = \"none\";\n                });\n                tooltip.appendChild(factoryButton);\n            });\n        });\n        const copyButton = (0, create_button_1.createButton)(\"Copy\", \"\", () => {\n            tooltip.style.display = \"none\";\n            const selectedFigure = (0, selected_figure_1.getSelectedFigure)();\n            if (!selectedFigure)\n                return;\n            let t = (0, actions_1.Copy)(selectedFigure);\n            (0, copied_figure_1.setCopiedFigure)(t);\n            t === null || t === void 0 ? void 0 : t.svgElement.addEventListener(\"click\", () => {\n                (0, create_prop_pane_1.createPropPane)(t);\n                (0, selected_figure_1.setSelectedFigure)(t);\n            });\n        });\n        const pasteButton = (0, create_button_1.createButton)(\"Paste\", \"\", () => {\n            const copiedFigure = (0, copied_figure_1.getCopiedFigure)();\n            (0, actions_1.Paste)(copiedFigure);\n            (0, to_svg_coordinates_1.changeToSvgCoordinates)(mouseX, mouseY, copiedFigure);\n            copiedFigure === null || copiedFigure === void 0 ? void 0 : copiedFigure.refreshProperties();\n            tooltip.style.display = \"none\";\n        });\n        const deleteButton = (0, create_button_1.createButton)(\"Delete\", \"\", () => {\n            (0, actions_1.Delete)((0, selected_figure_1.getSelectedFigure)());\n            tooltip.style.display = \"none\";\n        });\n        // Check them that way to maintain the order\n        tooltip.innerHTML = \"\";\n        tooltip.appendChild(insertButton);\n        if (e.target !== svgRoot) {\n            tooltip.appendChild(copyButton);\n        }\n        if ((0, copied_figure_1.getCopiedFigure)()) {\n            tooltip.appendChild(pasteButton);\n        }\n        if (e.target !== svgRoot) {\n            tooltip.appendChild(deleteButton);\n        }\n    });\n};\nexports.initializeSvgRoot = initializeSvgRoot;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/init-svg-root.ts?");

/***/ }),

/***/ "./src/ui/search-bar.ts":
/*!******************************!*\
  !*** ./src/ui/search-bar.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.initializeSearchInput = void 0;\nconst figures_container_1 = __webpack_require__(/*! ../figures-container */ \"./src/figures-container.ts\");\nconst group_1 = __importDefault(__webpack_require__(/*! ../models/group */ \"./src/models/group.ts\"));\nconst create_prop_pane_1 = __webpack_require__(/*! ./create-prop-pane */ \"./src/ui/create-prop-pane.ts\");\nconst searchInput = document.querySelector(\"#search-input\");\nconst initializeSearchInput = () => {\n    searchInput.addEventListener(\"input\", (e) => {\n        const searchTerm = e.target.value.trim();\n        let figure = figures_container_1.figuresContainer.figures.find((f) => f.properties['name'].value.trim() === searchTerm);\n        if (!figure) {\n            figures_container_1.figuresContainer.groups.some((group) => {\n                figure = group.figures.find((f) => f.properties['name'].value.trim() === searchTerm);\n                return figure;\n            });\n        }\n        if (!figure) {\n            figure = figures_container_1.figuresContainer.groups.find((g) => g.properties['groupName'].value.trim() === searchTerm);\n        }\n        if (figure) {\n            if (figure instanceof group_1.default) {\n                (0, create_prop_pane_1.createGroupPropPane)(figure);\n            }\n            else {\n                (0, create_prop_pane_1.createPropPane)(figure);\n            }\n        }\n        else {\n            (0, create_prop_pane_1.closePropPane)();\n        }\n    });\n};\nexports.initializeSearchInput = initializeSearchInput;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/search-bar.ts?");

/***/ }),

/***/ "./src/ui/selected-figure.ts":
/*!***********************************!*\
  !*** ./src/ui/selected-figure.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.setSelectedFigure = exports.getSelectedFigure = void 0;\nlet _selectedFigure = null;\nfunction getSelectedFigure() {\n    return _selectedFigure;\n}\nexports.getSelectedFigure = getSelectedFigure;\nfunction setSelectedFigure(figure) {\n    _selectedFigure = figure;\n}\nexports.setSelectedFigure = setSelectedFigure;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/selected-figure.ts?");

/***/ }),

/***/ "./src/ui/to-svg-coordinates.ts":
/*!**************************************!*\
  !*** ./src/ui/to-svg-coordinates.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.changeToSvgCoordinates = void 0;\nconst svgRoot = document.querySelector(\"#svg-root\");\nfunction changeToSvgCoordinates(mouseX, mouseY, newFigure) {\n    const ctm = svgRoot.getScreenCTM().inverse();\n    const point = new DOMPoint(mouseX, mouseY);\n    const transformedPoint = point.matrixTransform(ctm);\n    newFigure.properties[\"translateX\"].value = transformedPoint.x.toString();\n    newFigure.properties[\"translateY\"].value = transformedPoint.y.toString();\n    if (newFigure.properties[\"cx\"]) {\n        newFigure.properties[\"cx\"].value = \"0\";\n        newFigure.properties[\"cy\"].value = \"0\";\n    }\n    if (newFigure.properties[\"x\"]) {\n        newFigure.properties[\"x\"].value = \"0\";\n        newFigure.properties[\"y\"].value = \"0\";\n    }\n    if (newFigure.properties[\"points\"]) {\n        newFigure.properties[\"translateX\"].value = (+newFigure.properties[\"translateX\"].value - 50).toString();\n        newFigure.properties[\"translateY\"].value = (+newFigure.properties[\"translateY\"].value - 30).toString();\n    }\n}\nexports.changeToSvgCoordinates = changeToSvgCoordinates;\n\n\n//# sourceURL=webpack://cg_fmi/./src/ui/to-svg-coordinates.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.ts");
/******/ 	
/******/ })()
;